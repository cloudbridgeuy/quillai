<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ClassAttributor WASM Bindings Test</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .test-section {
            background: white;
            margin: 20px 0;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            border-left: 4px solid #28a745;
        }
        
        .test-section h2 {
            color: #333;
            margin-top: 0;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }
        
        .test-element {
            padding: 15px;
            margin: 10px 0;
            border: 2px dashed #ddd;
            border-radius: 5px;
            background-color: #fafafa;
            min-height: 40px;
            display: flex;
            align-items: center;
            transition: all 0.3s ease;
        }
        
        .test-element:hover {
            border-color: #28a745;
            background-color: #f0fff4;
        }
        
        .controls {
            margin: 15px 0;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s ease;
        }
        
        .btn-primary {
            background-color: #28a745;
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #218838;
        }
        
        .btn-secondary {
            background-color: #6c757d;
            color: white;
        }
        
        .btn-secondary:hover {
            background-color: #5a6268;
        }
        
        .btn-danger {
            background-color: #dc3545;
            color: white;
        }
        
        .btn-danger:hover {
            background-color: #c82333;
        }
        
        .btn-info {
            background-color: #17a2b8;
            color: white;
        }
        
        .btn-info:hover {
            background-color: #138496;
        }
        
        .result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
        
        .result.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .result.error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .result.info {
            background-color: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        .info-box {
            background-color: #e7f3ff;
            border: 1px solid #b3d9ff;
            border-radius: 4px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .info-box h4 {
            margin-top: 0;
            color: #0066cc;
        }
        
        .code {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 10px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            margin: 10px 0;
            overflow-x: auto;
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-success {
            background-color: #28a745;
        }
        
        .status-error {
            background-color: #dc3545;
        }
        
        .status-pending {
            background-color: #ffc107;
        }
        
        .visual-demo {
            border: 2px solid #333;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            background: white;
        }
        
        .demo-text {
            font-size: 18px;
            line-height: 1.6;
            margin: 10px 0;
        }
        
        /* CSS classes for testing ClassAttributor */
        .text-align-left { text-align: left; }
        .text-align-center { text-align: center; }
        .text-align-right { text-align: right; }
        .text-align-justify { text-align: justify; }
        
        .font-size-xs { font-size: 12px; }
        .font-size-sm { font-size: 14px; }
        .font-size-md { font-size: 16px; }
        .font-size-lg { font-size: 18px; }
        .font-size-xl { font-size: 24px; }
        
        .text-color-primary { color: #007bff; }
        .text-color-secondary { color: #6c757d; }
        .text-color-success { color: #28a745; }
        .text-color-danger { color: #dc3545; }
        .text-color-warning { color: #ffc107; }
        .text-color-info { color: #17a2b8; }
        
        .bg-color-light { background-color: #f8f9fa; }
        .bg-color-primary { background-color: #007bff; color: white; }
        .bg-color-secondary { background-color: #6c757d; color: white; }
        .bg-color-success { background-color: #28a745; color: white; }
        
        .class-inspector {
            background-color: #f1f3f4;
            border: 1px solid #dadce0;
            border-radius: 4px;
            padding: 10px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            word-break: break-all;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>🎨 ClassAttributor WASM Bindings Test Suite</h1>
        <p>Comprehensive testing of CSS class management through prefix-value patterns</p>
        <div id="version-info"></div>
    </div>

    <!-- Test Section 1: Basic Constructor -->
    <div class="test-section">
        <h2>1. Basic Constructor Test</h2>
        <div class="info-box">
            <h4>Testing: new ClassAttributor(attr_name, key_name)</h4>
            <p>Creates a basic class attributor with default options for text alignment classes.</p>
            <p><strong>Pattern:</strong> <code>text-align-{value}</code></p>
        </div>
        
        <div class="test-element" id="basic-test-element">
            This text alignment will change using the basic constructor
        </div>
        
        <div class="class-inspector" id="basic-class-inspector">
            Current classes: (none)
        </div>
        
        <div class="controls">
            <button class="btn btn-primary" onclick="testBasicConstructor('left')">Align Left</button>
            <button class="btn btn-primary" onclick="testBasicConstructor('center')">Align Center</button>
            <button class="btn btn-primary" onclick="testBasicConstructor('right')">Align Right</button>
            <button class="btn btn-primary" onclick="testBasicConstructor('justify')">Justify</button>
            <button class="btn btn-secondary" onclick="getBasicValue()">Get Value</button>
            <button class="btn btn-info" onclick="getBasicClassName('center')">Get Class Name</button>
            <button class="btn btn-danger" onclick="removeBasicClass()">Remove Classes</button>
        </div>
        
        <div id="basic-results"></div>
        
        <div class="code">
const alignAttr = new ClassAttributor("align", "text-align");
alignAttr.add(element, "center"); // Adds "text-align-center" class
        </div>
    </div>

    <!-- Test Section 2: Scope Constructor -->
    <div class="test-section">
        <h2>2. Scope Constructor Test</h2>
        <div class="info-box">
            <h4>Testing: ClassAttributor.newWithScope(attr_name, key_name, scope)</h4>
            <p>Creates a class attributor with specific scope for font size classes.</p>
            <p><strong>Pattern:</strong> <code>font-size-{value}</code></p>
        </div>
        
        <div class="visual-demo">
            <div class="demo-text" id="scope-test-element">
                This text will change font size using the scope constructor.
                The scope determines how the attributor interacts with the document model.
            </div>
        </div>
        
        <div class="class-inspector" id="scope-class-inspector">
            Current classes: (none)
        </div>
        
        <div class="controls">
            <button class="btn btn-primary" onclick="testScopeConstructor('xs')">Extra Small</button>
            <button class="btn btn-primary" onclick="testScopeConstructor('sm')">Small</button>
            <button class="btn btn-primary" onclick="testScopeConstructor('md')">Medium</button>
            <button class="btn btn-primary" onclick="testScopeConstructor('lg')">Large</button>
            <button class="btn btn-primary" onclick="testScopeConstructor('xl')">Extra Large</button>
            <button class="btn btn-secondary" onclick="getScopeValue()">Get Value</button>
            <button class="btn btn-danger" onclick="removeScopeClass()">Remove Classes</button>
        </div>
        
        <div id="scope-results"></div>
        
        <div class="code">
const sizeAttr = ClassAttributor.newWithScope("size", "font-size", Scope.Inline);
sizeAttr.add(element, "lg"); // Adds "font-size-lg" class
        </div>
    </div>

    <!-- Test Section 3: Whitelist Constructor -->
    <div class="test-section">
        <h2>3. Whitelist Constructor Test</h2>
        <div class="info-box">
            <h4>Testing: ClassAttributor.newWithWhitelist(attr_name, key_name, whitelist)</h4>
            <p>Creates a class attributor with restricted color values. Only values in the whitelist are allowed.</p>
            <p><strong>Pattern:</strong> <code>text-color-{value}</code></p>
        </div>
        
        <div class="test-element" id="whitelist-test-element">
            This text will change color using the whitelist constructor
        </div>
        
        <div class="class-inspector" id="whitelist-class-inspector">
            Current classes: (none)
        </div>
        
        <div class="controls">
            <button class="btn btn-primary" onclick="testWhitelistConstructor('primary')">Primary (Valid)</button>
            <button class="btn btn-primary" onclick="testWhitelistConstructor('success')">Success (Valid)</button>
            <button class="btn btn-primary" onclick="testWhitelistConstructor('danger')">Danger (Valid)</button>
            <button class="btn btn-primary" onclick="testWhitelistConstructor('invalid')">Invalid Color</button>
            <button class="btn btn-primary" onclick="testWhitelistConstructor('purple')">Purple (Invalid)</button>
            <button class="btn btn-secondary" onclick="getWhitelistValue()">Get Value</button>
            <button class="btn btn-danger" onclick="removeWhitelistClass()">Remove Classes</button>
        </div>
        
        <div id="whitelist-results"></div>
        
        <div class="code">
const colorAttr = ClassAttributor.newWithWhitelist("color", "text-color", 
    ["primary", "secondary", "success", "danger", "warning", "info"]);
colorAttr.add(element, "primary"); // Success
colorAttr.add(element, "purple");  // Fails - not in whitelist
        </div>
    </div>

    <!-- Test Section 4: Full Constructor -->
    <div class="test-section">
        <h2>4. Full Constructor Test</h2>
        <div class="info-box">
            <h4>Testing: ClassAttributor.newFull(attr_name, key_name, scope, whitelist)</h4>
            <p>Creates a class attributor with both scope and whitelist for background colors.</p>
            <p><strong>Pattern:</strong> <code>bg-color-{value}</code></p>
        </div>
        
        <div class="test-element" id="full-test-element">
            This element will change background color using the full constructor
        </div>
        
        <div class="class-inspector" id="full-class-inspector">
            Current classes: (none)
        </div>
        
        <div class="controls">
            <button class="btn btn-primary" onclick="testFullConstructor('light')">Light (Valid)</button>
            <button class="btn btn-primary" onclick="testFullConstructor('primary')">Primary (Valid)</button>
            <button class="btn btn-primary" onclick="testFullConstructor('success')">Success (Valid)</button>
            <button class="btn btn-primary" onclick="testFullConstructor('dark')">Dark (Invalid)</button>
            <button class="btn btn-primary" onclick="testFullConstructor('custom')">Custom (Invalid)</button>
            <button class="btn btn-secondary" onclick="getFullValue()">Get Value</button>
            <button class="btn btn-danger" onclick="removeFullClass()">Remove Classes</button>
        </div>
        
        <div id="full-results"></div>
        
        <div class="code">
const bgAttr = ClassAttributor.newFull("background", "bg-color", 
    Scope.Inline, ["light", "primary", "secondary", "success"]);
bgAttr.add(element, "primary"); // Success
bgAttr.add(element, "dark");    // Fails - not in whitelist
        </div>
    </div>

    <!-- Test Section 5: Multiple Classes Test -->
    <div class="test-section">
        <h2>5. Multiple Classes Test</h2>
        <div class="info-box">
            <h4>Testing: Multiple class attributors on same element</h4>
            <p>Verifying that different attributors can coexist and only affect their own classes.</p>
        </div>
        
        <div class="test-element" id="multiple-test-element" class="existing-class another-class">
            This element has existing classes and will receive multiple attributor classes
        </div>
        
        <div class="class-inspector" id="multiple-class-inspector">
            Current classes: existing-class another-class
        </div>
        
        <div class="controls">
            <button class="btn btn-primary" onclick="testMultipleClasses('align', 'center')">Add Alignment</button>
            <button class="btn btn-primary" onclick="testMultipleClasses('size', 'lg')">Add Size</button>
            <button class="btn btn-primary" onclick="testMultipleClasses('color', 'primary')">Add Color</button>
            <button class="btn btn-secondary" onclick="removeMultipleClass('align')">Remove Alignment</button>
            <button class="btn btn-secondary" onclick="removeMultipleClass('size')">Remove Size</button>
            <button class="btn btn-secondary" onclick="removeMultipleClass('color')">Remove Color</button>
            <button class="btn btn-danger" onclick="clearMultipleClasses()">Clear All Attributor Classes</button>
        </div>
        
        <div id="multiple-results"></div>
        
        <div class="code">
// Multiple attributors on same element
alignAttr.add(element, "center");  // Adds "text-align-center"
sizeAttr.add(element, "lg");       // Adds "font-size-lg"
colorAttr.add(element, "primary"); // Adds "text-color-primary"
// Existing classes are preserved
        </div>
    </div>

    <!-- Test Section 6: Class Name Generation -->
    <div class="test-section">
        <h2>6. Class Name Generation Test</h2>
        <div class="info-box">
            <h4>Testing: getClassName() method</h4>
            <p>Testing the class name generation method to understand the prefix-value pattern.</p>
        </div>
        
        <div class="controls">
            <button class="btn btn-primary" onclick="testClassNameGeneration()">Test Class Name Generation</button>
        </div>
        
        <div id="classname-results"></div>
        
        <div class="code">
const attr = new ClassAttributor("align", "text-align");
console.log(attr.getClassName("center")); // "text-align-center"
console.log(attr.getClassName("left"));   // "text-align-left"
        </div>
    </div>

    <!-- Test Section 7: Getter Methods -->
    <div class="test-section">
        <h2>7. Getter Methods Test</h2>
        <div class="info-box">
            <h4>Testing: attrName(), keyName(), scope() getters</h4>
            <p>Verifying that getter methods return correct values with proper camelCase naming.</p>
        </div>
        
        <div class="controls">
            <button class="btn btn-primary" onclick="testGetters()">Test All Getters</button>
        </div>
        
        <div id="getters-results"></div>
        
        <div class="code">
const attr = new ClassAttributor("textAlign", "text-align");
console.log(attr.attrName()); // "textAlign"
console.log(attr.keyName());  // "text-align"
console.log(attr.scope());    // Scope enum value
        </div>
    </div>

    <!-- Test Section 8: Edge Cases and Error Handling -->
    <div class="test-section">
        <h2>8. Edge Cases and Error Handling Test</h2>
        <div class="info-box">
            <h4>Testing: Error conditions and edge cases</h4>
            <p>Testing behavior with invalid elements, special characters, and edge cases.</p>
        </div>
        
        <div class="controls">
            <button class="btn btn-primary" onclick="testEdgeCases()">Test Edge Cases</button>
        </div>
        
        <div id="edge-results"></div>
        
        <div class="code">
// Test edge conditions
attr.add(null, "value");           // Should handle gracefully
attr.add(element, null);           // Should handle gracefully
attr.add(element, "");             // Empty value
attr.add(element, "value-with-hyphens"); // Special characters
        </div>
    </div>

    <script type="module">
        import init, { ClassAttributor, Scope, version } from '../pkg/quillai_parchment.js';

        let alignAttr, sizeAttr, colorAttr, bgAttr;
        let multipleAlignAttr, multipleSizeAttr, multipleColorAttr;

        async function initializeTests() {
            try {
                await init();
                
                // Display version info
                document.getElementById('version-info').innerHTML = 
                    `<div class="status-indicator status-success"></div>Parchment v${version()} loaded successfully`;

                // Initialize attributors for testing
                alignAttr = new ClassAttributor("align", "text-align");
                sizeAttr = ClassAttributor.newWithScope("size", "font-size", Scope.Inline);
                colorAttr = ClassAttributor.newWithWhitelist("color", "text-color", 
                    ["primary", "secondary", "success", "danger", "warning", "info"]);
                bgAttr = ClassAttributor.newFull("background", "bg-color", 
                    Scope.Inline, ["light", "primary", "secondary", "success"]);

                // Attributors for multiple classes test
                multipleAlignAttr = new ClassAttributor("align", "text-align");
                multipleSizeAttr = new ClassAttributor("size", "font-size");
                multipleColorAttr = new ClassAttributor("color", "text-color");

                console.log("ClassAttributor tests initialized successfully");
                
            } catch (error) {
                console.error("Failed to initialize ClassAttributor tests:", error);
                document.getElementById('version-info').innerHTML = 
                    `<div class="status-indicator status-error"></div>Failed to load: ${error.message}`;
            }
        }

        function logResult(containerId, message, type = 'info') {
            const container = document.getElementById(containerId);
            const timestamp = new Date().toLocaleTimeString();
            const resultDiv = document.createElement('div');
            resultDiv.className = `result ${type}`;
            resultDiv.innerHTML = `[${timestamp}] ${message}`;
            container.appendChild(resultDiv);
            container.scrollTop = container.scrollHeight;
        }

        function updateClassInspector(elementId, inspectorId) {
            const element = document.getElementById(elementId);
            const inspector = document.getElementById(inspectorId);
            const classes = element.className || '(none)';
            inspector.textContent = `Current classes: ${classes}`;
        }

        // Test functions for each section
        window.testBasicConstructor = function(alignment) {
            try {
                const element = document.getElementById('basic-test-element');
                const success = alignAttr.add(element, alignment);
                
                updateClassInspector('basic-test-element', 'basic-class-inspector');
                
                if (success) {
                    logResult('basic-results', `✅ Successfully added text-align-${alignment} class`, 'success');
                } else {
                    logResult('basic-results', `❌ Failed to add text-align-${alignment} class`, 'error');
                }
            } catch (error) {
                logResult('basic-results', `❌ Error: ${error.message}`, 'error');
            }
        };

        window.getBasicValue = function() {
            try {
                const element = document.getElementById('basic-test-element');
                const value = alignAttr.value(element);
                logResult('basic-results', `📖 Current alignment value: "${value}"`, 'info');
            } catch (error) {
                logResult('basic-results', `❌ Error getting value: ${error.message}`, 'error');
            }
        };

        window.getBasicClassName = function(value) {
            try {
                const className = alignAttr.getClassName(value);
                logResult('basic-results', `🏷️ Generated class name for "${value}": "${className}"`, 'info');
            } catch (error) {
                logResult('basic-results', `❌ Error generating class name: ${error.message}`, 'error');
            }
        };

        window.removeBasicClass = function() {
            try {
                const element = document.getElementById('basic-test-element');
                alignAttr.remove(element);
                updateClassInspector('basic-test-element', 'basic-class-inspector');
                logResult('basic-results', `🗑️ All text-align-* classes removed`, 'info');
            } catch (error) {
                logResult('basic-results', `❌ Error removing classes: ${error.message}`, 'error');
            }
        };

        window.testScopeConstructor = function(size) {
            try {
                const element = document.getElementById('scope-test-element');
                const success = sizeAttr.add(element, size);
                
                updateClassInspector('scope-test-element', 'scope-class-inspector');
                
                if (success) {
                    logResult('scope-results', `✅ Successfully added font-size-${size} class`, 'success');
                } else {
                    logResult('scope-results', `❌ Failed to add font-size-${size} class`, 'error');
                }
            } catch (error) {
                logResult('scope-results', `❌ Error: ${error.message}`, 'error');
            }
        };

        window.getScopeValue = function() {
            try {
                const element = document.getElementById('scope-test-element');
                const value = sizeAttr.value(element);
                logResult('scope-results', `📖 Current size value: "${value}"`, 'info');
            } catch (error) {
                logResult('scope-results', `❌ Error getting value: ${error.message}`, 'error');
            }
        };

        window.removeScopeClass = function() {
            try {
                const element = document.getElementById('scope-test-element');
                sizeAttr.remove(element);
                updateClassInspector('scope-test-element', 'scope-class-inspector');
                logResult('scope-results', `🗑️ All font-size-* classes removed`, 'info');
            } catch (error) {
                logResult('scope-results', `❌ Error removing classes: ${error.message}`, 'error');
            }
        };

        window.testWhitelistConstructor = function(color) {
            try {
                const element = document.getElementById('whitelist-test-element');
                const success = colorAttr.add(element, color);
                
                updateClassInspector('whitelist-test-element', 'whitelist-class-inspector');
                
                if (success) {
                    logResult('whitelist-results', `✅ Successfully added text-color-${color} class (whitelisted)`, 'success');
                } else {
                    logResult('whitelist-results', `❌ Failed to add text-color-${color} class (not whitelisted)`, 'error');
                }
            } catch (error) {
                logResult('whitelist-results', `❌ Error: ${error.message}`, 'error');
            }
        };

        window.getWhitelistValue = function() {
            try {
                const element = document.getElementById('whitelist-test-element');
                const value = colorAttr.value(element);
                logResult('whitelist-results', `📖 Current color value: "${value}"`, 'info');
            } catch (error) {
                logResult('whitelist-results', `❌ Error getting value: ${error.message}`, 'error');
            }
        };

        window.removeWhitelistClass = function() {
            try {
                const element = document.getElementById('whitelist-test-element');
                colorAttr.remove(element);
                updateClassInspector('whitelist-test-element', 'whitelist-class-inspector');
                logResult('whitelist-results', `🗑️ All text-color-* classes removed`, 'info');
            } catch (error) {
                logResult('whitelist-results', `❌ Error removing classes: ${error.message}`, 'error');
            }
        };

        window.testFullConstructor = function(bgColor) {
            try {
                const element = document.getElementById('full-test-element');
                const success = bgAttr.add(element, bgColor);
                
                updateClassInspector('full-test-element', 'full-class-inspector');
                
                if (success) {
                    logResult('full-results', `✅ Successfully added bg-color-${bgColor} class (whitelisted)`, 'success');
                } else {
                    logResult('full-results', `❌ Failed to add bg-color-${bgColor} class (not whitelisted)`, 'error');
                }
            } catch (error) {
                logResult('full-results', `❌ Error: ${error.message}`, 'error');
            }
        };

        window.getFullValue = function() {
            try {
                const element = document.getElementById('full-test-element');
                const value = bgAttr.value(element);
                logResult('full-results', `📖 Current background value: "${value}"`, 'info');
            } catch (error) {
                logResult('full-results', `❌ Error getting value: ${error.message}`, 'error');
            }
        };

        window.removeFullClass = function() {
            try {
                const element = document.getElementById('full-test-element');
                bgAttr.remove(element);
                updateClassInspector('full-test-element', 'full-class-inspector');
                logResult('full-results', `🗑️ All bg-color-* classes removed`, 'info');
            } catch (error) {
                logResult('full-results', `❌ Error removing classes: ${error.message}`, 'error');
            }
        };

        window.testMultipleClasses = function(type, value) {
            try {
                const element = document.getElementById('multiple-test-element');
                let attr, success;
                
                switch(type) {
                    case 'align':
                        attr = multipleAlignAttr;
                        success = attr.add(element, value);
                        break;
                    case 'size':
                        attr = multipleSizeAttr;
                        success = attr.add(element, value);
                        break;
                    case 'color':
                        attr = multipleColorAttr;
                        success = attr.add(element, value);
                        break;
                }
                
                updateClassInspector('multiple-test-element', 'multiple-class-inspector');
                
                if (success) {
                    logResult('multiple-results', `✅ Successfully added ${type} class: ${attr.getClassName(value)}`, 'success');
                } else {
                    logResult('multiple-results', `❌ Failed to add ${type} class`, 'error');
                }
            } catch (error) {
                logResult('multiple-results', `❌ Error: ${error.message}`, 'error');
            }
        };

        window.removeMultipleClass = function(type) {
            try {
                const element = document.getElementById('multiple-test-element');
                let attr;
                
                switch(type) {
                    case 'align':
                        attr = multipleAlignAttr;
                        break;
                    case 'size':
                        attr = multipleSizeAttr;
                        break;
                    case 'color':
                        attr = multipleColorAttr;
                        break;
                }
                
                attr.remove(element);
                updateClassInspector('multiple-test-element', 'multiple-class-inspector');
                logResult('multiple-results', `🗑️ Removed all ${type} classes`, 'info');
            } catch (error) {
                logResult('multiple-results', `❌ Error removing ${type} classes: ${error.message}`, 'error');
            }
        };

        window.clearMultipleClasses = function() {
            try {
                const element = document.getElementById('multiple-test-element');
                multipleAlignAttr.remove(element);
                multipleSizeAttr.remove(element);
                multipleColorAttr.remove(element);
                updateClassInspector('multiple-test-element', 'multiple-class-inspector');
                logResult('multiple-results', `🗑️ Removed all attributor classes (preserved existing classes)`, 'info');
            } catch (error) {
                logResult('multiple-results', `❌ Error clearing classes: ${error.message}`, 'error');
            }
        };

        window.testClassNameGeneration = function() {
            try {
                const testCases = [
                    { attr: alignAttr, values: ['left', 'center', 'right', 'justify'] },
                    { attr: sizeAttr, values: ['xs', 'sm', 'md', 'lg', 'xl'] },
                    { attr: colorAttr, values: ['primary', 'secondary', 'success'] }
                ];
                
                testCases.forEach(testCase => {
                    testCase.values.forEach(value => {
                        const className = testCase.attr.getClassName(value);
                        logResult('classname-results', `🏷️ ${testCase.attr.keyName()}-${value} → "${className}"`, 'success');
                    });
                });
                
            } catch (error) {
                logResult('classname-results', `❌ Error testing class name generation: ${error.message}`, 'error');
            }
        };

        window.testGetters = function() {
            try {
                // Test basic attributor getters
                const attrName = alignAttr.attrName();
                const keyName = alignAttr.keyName();
                const scope = alignAttr.scope();
                
                logResult('getters-results', `✅ Basic - attrName(): "${attrName}"`, 'success');
                logResult('getters-results', `✅ Basic - keyName(): "${keyName}"`, 'success');
                logResult('getters-results', `✅ Basic - scope(): ${scope}`, 'success');
                
                // Test scope attributor getters
                const scopeAttrName = sizeAttr.attrName();
                const scopeKeyName = sizeAttr.keyName();
                const scopeScope = sizeAttr.scope();
                
                logResult('getters-results', `✅ Scope - attrName(): "${scopeAttrName}"`, 'success');
                logResult('getters-results', `✅ Scope - keyName(): "${scopeKeyName}"`, 'success');
                logResult('getters-results', `✅ Scope - scope(): ${scopeScope}`, 'success');
                
                // Test whitelist attributor getters
                const whitelistAttrName = colorAttr.attrName();
                const whitelistKeyName = colorAttr.keyName();
                
                logResult('getters-results', `✅ Whitelist - attrName(): "${whitelistAttrName}"`, 'success');
                logResult('getters-results', `✅ Whitelist - keyName(): "${whitelistKeyName}"`, 'success');
                
            } catch (error) {
                logResult('getters-results', `❌ Error testing getters: ${error.message}`, 'error');
            }
        };

        window.testEdgeCases = function() {
            try {
                const element = document.getElementById('basic-test-element');
                
                // Test with null element (should handle gracefully)
                try {
                    const result1 = alignAttr.add(null, "center");
                    logResult('edge-results', `✅ Null element handled gracefully: ${result1}`, 'success');
                } catch (e) {
                    logResult('edge-results', `❌ Null element caused error: ${e.message}`, 'error');
                }
                
                // Test with undefined value (should handle gracefully)
                try {
                    const result2 = alignAttr.add(element, undefined);
                    logResult('edge-results', `✅ Undefined value handled gracefully: ${result2}`, 'success');
                } catch (e) {
                    logResult('edge-results', `❌ Undefined value caused error: ${e.message}`, 'error');
                }
                
                // Test with empty string value
                try {
                    const result3 = alignAttr.add(element, "");
                    logResult('edge-results', `✅ Empty string handled gracefully: ${result3}`, 'success');
                } catch (e) {
                    logResult('edge-results', `❌ Empty string caused error: ${e.message}`, 'error');
                }
                
                // Test with special characters
                try {
                    const result4 = alignAttr.add(element, "value-with-hyphens");
                    logResult('edge-results', `✅ Special characters handled gracefully: ${result4}`, 'success');
                } catch (e) {
                    logResult('edge-results', `❌ Special characters caused error: ${e.message}`, 'error');
                }
                
                // Test getting value from element without the class
                try {
                    const emptyElement = document.createElement('div');
                    const value = alignAttr.value(emptyElement);
                    logResult('edge-results', `✅ Empty element value: "${value}"`, 'success');
                } catch (e) {
                    logResult('edge-results', `❌ Empty element value caused error: ${e.message}`, 'error');
                }
                
                // Test class name generation with edge cases
                try {
                    const className1 = alignAttr.getClassName("");
                    const className2 = alignAttr.getClassName("value-with-hyphens");
                    logResult('edge-results', `✅ Edge case class names: "${className1}", "${className2}"`, 'success');
                } catch (e) {
                    logResult('edge-results', `❌ Class name generation error: ${e.message}`, 'error');
                }
                
            } catch (error) {
                logResult('edge-results', `❌ Error in edge cases test: ${error.message}`, 'error');
            }
        };

        // Initialize tests when page loads
        initializeTests();
    </script>
</body>
</html>